(function(){"use strict";var e={5330:function(e,t,s){var a=s(9242),l=(s(560),s(3396)),i=s(7139);const o={namespaced:!0,state:{access_token:null!=localStorage.getItem("token")?localStorage.getItem("token"):null,loggedIn:null!=localStorage.getItem("loggedIn")&&localStorage.getItem("loggedIn"),username:null!=localStorage.getItem("username")?localStorage.getItem("username"):null,role:null!=localStorage.getItem("role")?localStorage.getItem("role"):null,id:null!=localStorage.getItem("id")?localStorage.getItem("id"):null},mutations:{setJWT(e,t){localStorage.setItem("token",t),e.access_token=t},logout(e){e.loggedIn=!1,e.username=null,e.role=null,e.access_token=null,e.id=null,localStorage.setItem("token",null)}}},n=(0,i.MT)({modules:{auth:o}});var r=n,u=s(2483);const d=(0,l._)("h2",null,"Registrierung",-1);function c(e,t,s,i,o,n){const r=(0,l.up)("v-alert"),u=(0,l.up)("v-text-field"),c=(0,l.up)("v-select"),m=(0,l.up)("v-btn"),h=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.registrationSuccess?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrierung erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.registrationFailed?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrierung fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),(0,l._)("div",null,[d,(0,l.Wm)(h,{onSubmit:t[4]||(t[4]=(0,a.iM)((()=>{}),["prevent"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"text",id:"username",modelValue:o.formData.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.username=e),required:"",label:"Benutzername"},null,8,["modelValue"]),(0,l.Wm)(u,{type:"password",id:"password",modelValue:o.formData.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.password=e),required:"",label:"Passwort"},null,8,["modelValue"]),(0,l.Wm)(c,{modelValue:o.formData.role,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.role=e),label:"Rolle",items:o.roleOptions,"item-title":"label","item-value":"value"},null,8,["modelValue","items"]),(0,l.Wm)(m,{class:"text-none mb-4",color:"#48EDDD",size:"x-large",block:"",onClick:t[3]||(t[3]=e=>n.submitForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrieren")])),_:1})])),_:1})])],64)}const m="http://localhost:8080/user/register";var h={data(){return{formData:{username:"",password:"",role:"ADMIN"},roleOptions:[],registrationSuccess:!1,registrationFailed:!1}},methods:{async submitForm(){this.registrationSuccess=!1,this.registrationFailed=!1;try{const e=await this.$axios.post(m,this.formData);e&&(this.registrationSuccess=!0)}catch(e){this.registrationFailed=!0}}},created(){this.roleOptions=[{value:"ADMIN",label:"Admin"},{value:"STAFF",label:"Mitarbeiter"},{value:"CONTROLLER",label:"Kontrolleur"}]},name:"RegistrationForm"},g=s(89);const p=(0,g.Z)(h,[["render",c]]);var f=p,w=s(2268);const v=(0,l._)("h2",{class:"text-h2 mb-4"},"Login",-1);function k(e,t,s,a,i,o){const n=(0,l.up)("v-alert"),r=(0,l.up)("v-text-field"),u=(0,l.up)("v-btn"),d=(0,l.up)("v-form"),c=(0,l.up)("v-card"),m=(0,l.up)("v-col"),h=(0,l.up)("v-row"),g=(0,l.up)("v-container");return(0,l.wg)(),(0,l.j4)(g,{class:"fill-height"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{align:"center",justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{cols:"12",sm:"8",md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"elevation-12 pa-8"},{default:(0,l.w5)((()=>[i.loginSuccess?((0,l.wg)(),(0,l.j4)(n,{key:0,type:"success",icon:"mdi-check-circle-outline",class:"mb-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login erfolgreich!")])),_:1})):(0,l.kq)("",!0),i.loginFailed?((0,l.wg)(),(0,l.j4)(n,{key:1,type:"error",icon:"mdi-alert-circle-outline",class:"mb-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),v,(0,l.Wm)(d,{ref:"form"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{type:"text",id:"username",modelValue:i.formData.username,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formData.username=e),rules:[i.rules.required],label:"Benutzername"},null,8,["modelValue","rules"]),(0,l.Wm)(r,{type:"password",id:"password",modelValue:i.formData.password,"onUpdate:modelValue":t[1]||(t[1]=e=>i.formData.password=e),rules:[i.rules.required],label:"Passwort"},null,8,["modelValue","rules"]),(0,l.Wm)(u,{color:"#2196F3",dark:"",block:"",onClick:o.validateAndSubmitForm},{default:(0,l.w5)((()=>[(0,l.Uk)("Anmelden")])),_:1},8,["onClick"]),i.validationError?((0,l.wg)(),(0,l.j4)(n,{key:0,type:"error",class:"mt-4"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,w.zw)(i.validationError),1)])),_:1})):(0,l.kq)("",!0)])),_:1},512)])),_:1})])),_:1})])),_:1})])),_:1})}const y="http://localhost:8080/user/login";var D={data(){return{formData:{username:"",password:""},loginSuccess:!1,loginFailed:!1,validationError:"",rules:{required:e=>!!e||"Dieses Feld ist erforderlich"}}},methods:{async validateAndSubmitForm(){this.loginSuccess=!1,this.loginFailed=!1,this.validationError="",this.$refs.form.validate()?this.submitForm():this.validationError="Bitte füllen Sie alle erforderlichen Felder aus."},async submitForm(){if(this.loginSuccess=!1,this.loginFailed=!1,this.validationError="",this.formData.username&&this.formData.password)try{const e=await this.$axios.post(y,this.formData);this.loginSuccess=!0,200===e.status&&(r.state.auth.loggedIn=!0,r.state.auth.username=e.data.username,r.state.auth.role=e.data.role,r.state.auth.id=e.data.id,r.commit("auth/setJWT",e.data.token),setTimeout((()=>{this.$router.push("/events")}),1e3),console.log("Anmeldung erfolgreich:",e.data))}catch(e){this.loginFailed=!0,console.error("Fehler bei der Anmeldung:",e)}else this.validationError="Bitte füllen Sie alle erforderlichen Felder aus."}},created(){},name:"LoginForm"};const b=(0,g.Z)(D,[["render",k]]);var _=b;const U={key:0},A=(0,l._)("div",{style:{clear:"both"}},null,-1);function x(e,t,s,i,o,n){const r=(0,l.up)("v-alert"),u=(0,l.up)("v-icon"),d=(0,l.up)("v-data-table"),c=(0,l.up)("v-btn"),m=(0,l.up)("v-container"),h=(0,l.up)("v-text-field"),g=(0,l.up)("guest-view"),p=(0,l.up)("assign-view"),f=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.success&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.failed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.deleteSuccess&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:2,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.deleteFailed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:3,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.selectedEvent?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{items:o.events,headers:o.headers,"items-per-page":o.itemsPerPage,"server-items-length":o.totalEvents,"item-key":"eventName",loading:o.loading,"onUpdate:page":n.onPageChange},{item:(0,l.w5)((({item:e})=>[(0,l._)("tr",null,[(0,l._)("td",null,(0,w.zw)(e.eventName),1),(0,l._)("td",null,(0,w.zw)(e.eventTimeDisplay),1),(0,l._)("td",null,(0,w.zw)(e.location),1),(0,l._)("td",null,(0,w.zw)(e.checkedInGuestsCount),1),(0,l._)("td",null,(0,w.zw)(e.totalGuestCount),1),(0,l._)("td",null,[(0,l.Wm)(u,{size:"small",class:"me-2",onClick:t=>n.editEvent(e),color:"#2196F3"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,l.Wm)(u,{size:"small",onClick:t=>n.deleteItem(e),color:"rgb(200, 35, 51)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-delete ")])),_:2},1032,["onClick"])])])])),_:1},8,["items","headers","items-per-page","server-items-length","loading","onUpdate:page"]),(0,l.Wm)(c,{class:"text-none mb-4 create-btn",color:"#2196F3",onClick:t[0]||(t[0]=e=>n.createEvent())},{default:(0,l.w5)((()=>[(0,l.Uk)("Erstellen")])),_:1})])),_:1})),o.selectedEvent?((0,l.wg)(),(0,l.j4)(m,{key:5},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{onSubmit:(0,a.iM)(n.submitForm,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"text",id:"eventName",modelValue:o.formData.eventName,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.eventName=e),required:"",label:"Event Name"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"datetime-local",id:"eventTime",modelValue:o.formData.eventTime,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.eventTime=e),required:"",label:"Event Zeit"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"number",id:"maxGuestList",modelValue:o.formData.maxGuestList,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.maxGuestList=e),required:"",label:"Max Anzahl Gäste"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"number",id:"price",modelValue:o.formData.price,"onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.price=e),required:"",label:"Preis"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"text",id:"location",modelValue:o.formData.location,"onUpdate:modelValue":t[5]||(t[5]=e=>o.formData.location=e),required:"",label:"Location"},null,8,["modelValue"]),o.formData.id?((0,l.wg)(),(0,l.iD)("div",U,[(0,l.Wm)(g,{eventId:o.formData.id,editAllowed:o.createdByMyUser},null,8,["eventId","editAllowed"]),(0,l.Wm)(p,{eventId:o.formData.id,editAllowed:o.createdByMyUser},null,8,["eventId","editAllowed"])])):(0,l.kq)("",!0),A,(0,l._)("div",null,[(0,l.Wm)(c,{type:"submit",class:"text-none mb-4 right-btn",color:"#28a745"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1}),(0,l.Wm)(c,{class:"text-none mb-4 left-btn",color:"#ffc107",onClick:t[6]||(t[6]=e=>n.cancelForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Abbrechen")])),_:1})])])),_:1},8,["onSubmit"])])),_:1})):(0,l.kq)("",!0)],64)}function S(){let e=r.state.auth.access_token;return e?{Authorization:"Bearer "+e}:{}}function W(e,t,s,i,o,n){const r=(0,l.up)("v-alert"),u=(0,l.up)("v-col"),d=(0,l.up)("v-row"),c=(0,l.up)("v-expansion-panel-title"),m=(0,l.up)("v-icon"),h=(0,l.up)("v-data-table"),g=(0,l.up)("v-btn"),p=(0,l.up)("v-card-title"),f=(0,l.up)("v-text-field"),v=(0,l.up)("v-form"),k=(0,l.up)("v-card-text"),y=(0,l.up)("v-card-actions"),D=(0,l.up)("v-card"),b=(0,l.up)("v-dialog"),_=(0,l.up)("v-container"),U=(0,l.up)("v-expansion-panel-text"),A=(0,l.up)("v-expansion-panel"),x=(0,l.up)("v-expansion-panels");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.success&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.failed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.deleteSuccess&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:2,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.deleteFailed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:3,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(x,{style:{"margin-bottom":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(A,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{cols:"4",class:"d-flex justify-start"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Gäste ")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{items:o.guests,headers:o.headers,"items-per-page":o.itemsPerPage,"server-items-length":o.totalGuests,"item-key":"firstName",loading:o.loading,"onUpdate:page":n.onPageChange},{item:(0,l.w5)((({item:e})=>[(0,l._)("tr",null,[(0,l._)("td",null,(0,w.zw)(e.firstName+" "+e.lastName),1),(0,l._)("td",null,(0,w.zw)(e.additionalGuests),1),(0,l._)("td",null,[e.remainingCheckIns>0?((0,l.wg)(),(0,l.j4)(m,{key:0,size:"small",class:"me-2",onClick:t=>n.checkInGuest(e),color:"green"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-checkbox-marked ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),0==e.remainingCheckIns?((0,l.wg)(),(0,l.j4)(m,{key:1,size:"small",class:"me-2",onClick:t=>n.checkOutGuest(e),color:"rgb(200, 35, 51)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-arrow-right-box ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,l.Uk)(" "+(0,w.zw)(e.remainingCheckIns),1)]),(0,l._)("td",null,(0,w.zw)(n.getCheckedInDisplayText(e.checkedIn)),1),(0,l._)("td",null,(0,w.zw)(n.geCustomPriceDisplayText(e.customPrice)),1),(0,l._)("td",null,(0,w.zw)(e.comment),1),(0,l._)("td",null,(0,w.zw)(e.addedByDisplayText),1),(0,l._)("td",null,[(0,l.Wm)(m,{size:"small",class:"me-2",onClick:t=>n.editGuest(e),color:"#2196F3"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,l.Wm)(m,{size:"small",onClick:t=>n.deleteGuest(e),color:"rgb(200, 35, 51)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-delete ")])),_:2},1032,["onClick"])])])])),_:1},8,["items","headers","items-per-page","server-items-length","loading","onUpdate:page"]),s.editAllowed?((0,l.wg)(),(0,l.j4)(g,{key:0,class:"text-none mb-4 right-btn",color:"#48EDDD",onClick:t[0]||(t[0]=e=>n.addGuest())},{default:(0,l.w5)((()=>[(0,l.Uk)("Gast hinzufügen")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(b,{modelValue:o.guestDialogVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>o.guestDialogVisible=e),"max-width":"500"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,w.zw)(o.guestData.id?"Gast bearbeiten":"Gast hinzufügen"),1)])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{onSubmit:t[6]||(t[6]=(0,a.iM)((()=>{}),["prevent"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{type:"text",id:"firstName",modelValue:o.guestData.firstName,"onUpdate:modelValue":t[1]||(t[1]=e=>o.guestData.firstName=e),required:"",label:"Vorname"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"text",id:"lastName",modelValue:o.guestData.lastName,"onUpdate:modelValue":t[2]||(t[2]=e=>o.guestData.lastName=e),required:"",label:"Nachname"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"number",id:"additionalGuests",modelValue:o.guestData.additionalGuests,"onUpdate:modelValue":t[3]||(t[3]=e=>o.guestData.additionalGuests=e),required:"",label:"Anzahl Begleitung"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"text",id:"comment",modelValue:o.guestData.comment,"onUpdate:modelValue":t[4]||(t[4]=e=>o.guestData.comment=e),required:"",label:"Kommentar"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"number",id:"customPrice",modelValue:o.guestData.customPrice,"onUpdate:modelValue":t[5]||(t[5]=e=>o.guestData.customPrice=e),required:"",label:"Benutzerdefinierter Preis"},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"text-none mb-4",color:"#ffc107",onClick:t[7]||(t[7]=e=>n.closeDialog())},{default:(0,l.w5)((()=>[(0,l.Uk)("Abbrechen")])),_:1}),(0,l.Wm)(g,{type:"submit",class:"text-none mb-4",color:"#28a745",onClick:t[8]||(t[8]=e=>n.saveGuest())},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})],64)}const V="http://localhost:8080/event",E="http://localhost:8080/user/list";var q={props:{eventId:{type:Number,required:!0},editAllowed:{type:Boolean,required:!0}},data(){return{guests:[],headers:[{title:"Name",value:"firstNamelastName"},{title:"Anzahl Begleitung",value:"additionalGuests"},{title:"Übrige Check-ins",key:"remainingCheckIns"},{title:"Eingecheckt",key:"checkedIn"},{title:"B.def. Preis",key:"customPrice"},{title:"Kommentar",key:"comment"},{title:"Hinzugefügt von",key:"addedByDisplayText"},{title:"Aktionen",key:"actions"}],itemsPerPage:5,totalGuests:0,loading:!1,success:!1,failed:!1,deleteSuccess:!1,deleteFailed:!1,showAlert:!1,guestDialogVisible:!1,guestData:{firstName:"",lastName:"",additionalGuests:0,comment:"",customPrice:0},users:[]}},name:"GuestView",components:{},methods:{fetchData(){this.loading=!0,this.$axios.get(V+"/"+this.eventId+"/guest",{params:{_page:this.$route.query.page||1,_limit:this.itemsPerPage},headers:S()}).then((e=>{this.guests=e.data,console.log(this.guests),this.guests.forEach((e=>e.addedByDisplayText=this.users.find((t=>t.id===e.addedBy)).username)),this.totalGuests=Number(e.headers["x-total-count"]),this.guests.actions="",this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},fetchUsers(){this.loading=!0,this.$axios.get(E,{params:{},headers:S()}).then((e=>{this.users=e.data,this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},onPageChange(e){this.$router.push({query:{page:e}}),this.fetchData()},async deleteGuest(e){const t=window.confirm("Sind Sie sicher, dass Sie diesen Gast löschen möchten?");if(t){this.deleteSuccess=!1,this.deleteFailed=!1;try{console.log("Löschen "+e.id);let t=await this.$axios.delete(V+"/"+this.eventId+"/guest/"+e.id,{params:{},headers:S()});t&&(console.log("DELETED"),console.log(t),this.deleteSuccess=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(s){console.log("ERROR"),console.log(s),this.deleteFailed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},addGuest(){this.openDialog()},editGuest(e){this.guestDialogVisible=!0,this.guestData={...this.guests.find((t=>t.id===e.id))}},getCheckedInDisplayText(e){return!1===e?"Nein":"Ja"},geCustomPriceDisplayText(e){return e+"€"},openDialog(){this.guestDialogVisible=!0},closeDialog(){this.guestDialogVisible=!1,this.guestData={firstName:"",lastName:"",additionalGuests:0,comment:"",customPrice:0}},async saveGuest(){console.log(this.guestData),this.success=!1,this.failed=!1;try{let e;this.guestData.id?(console.log("UMÄNDERN"),e=await this.$axios.put(V+"/"+this.eventId+"/guest/"+this.guestData.id,this.guestData,{params:{},headers:S()})):(console.log("NEEEU"),e=await this.$axios.post(V+"/"+this.eventId+"/guest",this.guestData,{params:{},headers:S()})),e&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.closeDialog(),this.fetchData())}catch(e){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}},async checkOutGuest(e){const t=window.confirm("Sind Sie sicher, dass Sie diesen Gast auschecken möchten?");t&&await this.checkInGuest(e)},async checkInGuest(e){console.log(e);try{console.log("UMÄNDERN");let t=await this.$axios.put(V+"/"+this.eventId+"/check-in/"+e.id,{},{params:{},headers:S()});t&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(t){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},watch:{"$route.query.page"(){this.fetchData()}},created(){console.log(this.eventId),this.fetchUsers(),this.fetchData()}};const I=(0,g.Z)(q,[["render",W]]);var F=I;function N(e,t,s,a,i,o){const n=(0,l.up)("v-alert"),r=(0,l.up)("v-col"),u=(0,l.up)("v-row"),d=(0,l.up)("v-expansion-panel-title"),c=(0,l.up)("v-select"),m=(0,l.up)("v-btn"),h=(0,l.up)("v-container"),g=(0,l.up)("v-expansion-panel-text"),p=(0,l.up)("v-expansion-panel"),f=(0,l.up)("v-expansion-panels");return(0,l.wg)(),(0,l.iD)(l.HY,null,[i.success&&e.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),i.failed&&e.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(f,{style:{"margin-bottom":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{cols:"4",class:"d-flex justify-start"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Zugeordnete Benutzer ")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{modelValue:i.assignedUsers,"onUpdate:modelValue":t[0]||(t[0]=e=>i.assignedUsers=e),items:i.allUsers,chips:"",label:"Benutzer",multiple:"","item-title":"username","item-value":"id"},null,8,["modelValue","items"]),(0,l._)("div",null,[(0,l.Wm)(m,{class:"text-none mb-4 right-btn",color:"#28a745",onClick:t[1]||(t[1]=e=>o.saveAssignedUsers())},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1})])])),_:1})])),_:1})])),_:1})])),_:1})],64)}const C="http://localhost:8080";var T={props:{eventId:{type:Number,required:!0}},data(){return{assignedUsers:[],allUsers:[],loading:!1,success:!1,failed:!1}},name:"AssignView",components:{},methods:{fetchData(){this.loading=!0,this.$axios.get(C+"/user/list",{params:{},headers:S()}).then((e=>{this.allUsers=e.data,this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},async saveAssignedUsers(){console.log(this.assignedUsers),this.success=!1,this.failed=!1;let e=!1;for(let s=0;s<this.assignedUsers.length;s++)if(this.assignedUsers[s]){this.data={userId:this.assignedUsers[s]};try{await this.$axios.post(C+"/event/"+this.eventId+"/assign",this.data,{params:{},headers:S()})}catch(t){console.log(t),e=this.assignedUsers[s]}}e?(console.log("errorCatchedForId "+e),this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)):(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3))}},watch:{"$route.query.page"(){this.fetchData()}},created(){console.log(this.eventId),this.fetchData()}};const P=(0,g.Z)(T,[["render",N]]);var j=P;const G="http://localhost:8080/event";var z={data(){return{events:[],headers:[{title:"Event Name",value:"eventName"},{title:"Event Time",value:"eventTime"},{title:"Location",value:"location"},{title:"Anzahl eingecheckte Gäste",value:"checkedInGuestsCount"},{title:"Anzahl Gäste",value:"totalGuestCount"},{title:"Aktionen",key:"actions"}],itemsPerPage:5,totalEvents:0,loading:!1,selectedEvent:!1,formData:{eventName:"",eventTime:null,maxGuestList:0,price:0,location:""},success:!1,failed:!1,deleteSuccess:!1,deleteFailed:!1,showAlert:!1,guestDialogVisible:!1,guestData:{firstName:"",lastName:"",additionalGuests:0,comment:"",customPrice:0},createdByMyUser:!1,myId:null}},name:"EventsPage",components:{AssignView:j,GuestView:F},methods:{fetchData(){this.loading=!0,this.$axios.get(G,{params:{_page:this.$route.query.page||1,_limit:this.itemsPerPage,sortBy:"eventName",order:"asc"},headers:S()}).then((e=>{this.events=e.data,this.totalEvents=Number(e.headers["x-total-count"]),this.events.forEach((e=>{e.eventTimeDisplay=this.formatDate(e.eventTime);const t=new Date(e.eventTime),s=new Date(t.getTime()-6e4*t.getTimezoneOffset());e.eventTime=s.toISOString().slice(0,16)})),this.events.actions="",this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},formatDate(e){if(!e)return"";const t={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"};let s=new Date(e).toLocaleDateString("de-DE",t);return s=s.replace(/[,]/g," "),s},onPageChange(e){this.$router.push({query:{page:e}}),this.fetchData()},createEvent(){this.selectedEvent=!0},editEvent(e){this.selectedEvent=!0;let t=this.events.find((t=>t.id===e.id));this.formData={...t},console.log(t.createdBy),this.createdByMyUser=t.createdBy===this.myId},async deleteItem(e){const t=window.confirm("Sind Sie sicher, dass Sie dieses Event löschen möchten?");if(t){this.deleteSuccess=!1,this.deleteFailed=!1;try{console.log("Löschen "+e.id);let t=await this.$axios.delete(G+"/"+e.id,{params:{},headers:S()});t&&(this.deleteSuccess=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(s){this.deleteFailed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},cancelForm(){this.selectedEvent=!1,this.formData={eventName:"",eventTime:new Date,maxGuestList:0,price:0,location:""}},async submitForm(){this.success=!1,this.failed=!1;try{let e;this.formData.id?(console.log("UMÄNDERN"),e=await this.$axios.put(G+"/"+this.formData.id,this.formData,{params:{},headers:S()})):(console.log("NEEEU"),e=await this.$axios.post(G,this.formData,{params:{},headers:S()})),e&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.cancelForm(),this.fetchData())}catch(e){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},watch:{"$route.query.page"(){this.fetchData()}},created(){console.log(r.state.auth),this.myId=r.state.auth.id,this.fetchData()}};const $=(0,g.Z)(z,[["render",x]]);var L=$;function O(e,t,s,i,o,n){const r=(0,l.up)("v-alert"),u=(0,l.up)("v-icon"),d=(0,l.up)("v-data-table"),c=(0,l.up)("v-btn"),m=(0,l.up)("v-container"),h=(0,l.up)("v-text-field"),g=(0,l.up)("v-select"),p=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.success&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.failed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.deleteSuccess&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:2,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.deleteFailed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:3,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.selectedUser?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{items:o.users,headers:o.headers,"items-per-page":o.itemsPerPage,"server-items-length":o.totalEvents,"item-key":"username",loading:o.loading,"onUpdate:page":n.onPageChange},{item:(0,l.w5)((({item:e})=>[(0,l._)("tr",null,[(0,l._)("td",null,(0,w.zw)(e.username),1),(0,l._)("td",null,(0,w.zw)(e.role),1),(0,l._)("td",null,[(0,l.Wm)(u,{size:"small",class:"me-2",onClick:t=>n.editUser(e),color:"#2196F3"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,l.Wm)(u,{size:"small",onClick:t=>n.deleteUser(e),color:"rgb(200, 35, 51)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-delete ")])),_:2},1032,["onClick"])])])])),_:1},8,["items","headers","items-per-page","server-items-length","loading","onUpdate:page"]),(0,l.Wm)(c,{class:"text-none mb-4 create-btn",color:"#2196F3",onClick:t[0]||(t[0]=e=>n.createUser())},{default:(0,l.w5)((()=>[(0,l.Uk)("Erstellen")])),_:1})])),_:1})),o.selectedUser?((0,l.wg)(),(0,l.j4)(m,{key:5},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{onSubmit:(0,a.iM)(n.submitForm,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"text",id:"username",modelValue:o.formData.username,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.username=e),required:"",label:"Benutzername"},null,8,["modelValue"]),o.formData.id?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(h,{key:0,type:"password",id:"password",modelValue:o.formData.password,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.password=e),required:"",label:"Passwort"},null,8,["modelValue"])),(0,l.Wm)(g,{modelValue:o.formData.role,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.role=e),label:"Rolle",items:o.roleOptions,"item-title":"label","item-value":"value"},null,8,["modelValue","items"]),(0,l._)("div",null,[(0,l.Wm)(c,{type:"submit",class:"text-none mb-4 right-btn",color:"#28a745"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1}),(0,l.Wm)(c,{class:"text-none mb-4 left-btn",color:"#ffc107",onClick:t[4]||(t[4]=e=>n.cancelForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Abbrechen")])),_:1})])])),_:1},8,["onSubmit"])])),_:1})):(0,l.kq)("",!0)],64)}const B="http://localhost:8080/user";var M={data(){return{users:[],headers:[{title:"Benutzername",value:"username"},{title:"Rolle",value:"role"},{title:"Aktionen",key:"actions"}],itemsPerPage:5,totalEvents:0,loading:!1,selectedUser:!1,formData:{username:"",password:"",role:"ADMIN"},roleOptions:[],success:!1,failed:!1,deleteSuccess:!1,deleteFailed:!1,showAlert:!1}},name:"UserPage",components:{},methods:{fetchData(){this.loading=!0,this.$axios.get(B+"/list",{params:{_page:this.$route.query.page||1,_limit:this.itemsPerPage},headers:S()}).then((e=>{this.users=e.data,this.totalEvents=Number(e.headers["x-total-count"]),this.users.actions="",this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},onPageChange(e){this.$router.push({query:{page:e}}),this.fetchData()},createUser(){this.selectedUser=!0,console.log(this.selectedUser)},editUser(e){this.selectedUser=!0,this.formData={...this.users.find((t=>t.id===e.id))}},async deleteUser(e){const t=window.confirm("Sind Sie sicher, dass Sie diesen User löschen möchten?");if(t){this.deleteSuccess=!1,this.deleteFailed=!1;try{console.log("Löschen "+e.id);let t=await this.$axios.delete(B+"/"+e.id,{params:{},headers:S()});t&&(this.deleteSuccess=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(s){this.deleteFailed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},cancelForm(){this.selectedUser=!1,this.formData={username:"",password:"",role:"ADMIN"}},async submitForm(){console.log(this.formData),this.success=!1,this.failed=!1;try{let e;this.formData.id?(console.log("UMÄNDERN"),e=await this.$axios.put(B+"/"+this.formData.id,this.formData,{params:{},headers:S()})):(console.log("NEEEU"),e=await this.$axios.post(B+"/register",this.formData,{params:{},headers:S()})),e&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.cancelForm(),this.fetchData())}catch(e){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},watch:{"$route.query.page"(){this.fetchData()}},created(){this.roleOptions=[{value:"ADMIN",label:"Admin"},{value:"STAFF",label:"Mitarbeiter"},{value:"CONTROLLER",label:"Kontrolleur"}],this.fetchData()}};const R=(0,g.Z)(M,[["render",O]]);var Z=R;const H=[{path:"/register",component:f},{path:"/login",component:_},{path:"/events",component:L},{path:"/users",component:Z}],Y=(0,u.p7)({history:(0,u.r5)(),routes:H});var K=Y,J={__name:"App",setup(e){const t=(0,l.Fl)((()=>r.state.auth.loggedIn));function s(){r.commit("auth/logout"),K.push("/login")}return(e,a)=>{const i=(0,l.up)("router-link"),o=(0,l.up)("v-col"),n=(0,l.up)("v-row"),r=(0,l.up)("v-container"),u=(0,l.up)("v-app-bar"),d=(0,l.up)("router-view"),c=(0,l.up)("v-main"),m=(0,l.up)("v-app");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{app:"",color:"#2196F3",dark:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{align:"center",justify:"space-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/login",class:"nav-link"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login")])),_:1}),t.value?((0,l.wg)(),(0,l.j4)(i,{key:0,to:"/events",class:"nav-link"},{default:(0,l.w5)((()=>[(0,l.Uk)("Events")])),_:1})):(0,l.kq)("",!0),t.value?((0,l.wg)(),(0,l.j4)(i,{key:1,to:"/users",class:"nav-link"},{default:(0,l.w5)((()=>[(0,l.Uk)("Benutzer")])),_:1})):(0,l.kq)("",!0),t.value?((0,l.wg)(),(0,l.iD)("button",{key:2,onClick:s,class:"button button--primary button_navigation nav-link right-btn"},"Logout")):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d)])),_:1})])),_:1})])),_:1})}}};const Q=J;var X=Q,ee=s(1076),te=(s(9773),s(8957)),se=s(4926),ae=s(8600),le=s(596),ie=s(3504);const oe=(0,te.Rd)({icons:{defaultSet:"mdi",aliases:ie.j,sets:{mdi:ie.t,fa:le.fa}},components:se,directives:ae}),ne=(0,a.ri)(X);ne.use(oe),ne.use(K),ne.use(r),ne.config.globalProperties.$axios=ee.Z,ne.mount("#app")}},t={};function s(a){var l=t[a];if(void 0!==l)return l.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,a,l,i){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],l=e[d][1],i=e[d][2];for(var n=!0,r=0;r<a.length;r++)(!1&i||o>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[r])}))?a.splice(r--,1):(n=!1,i<o&&(o=i));if(n){e.splice(d--,1);var u=l();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,l,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,i,o=a[0],n=a[1],r=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(l in n)s.o(n,l)&&(s.m[l]=n[l]);if(r)var d=r(s)}for(t&&t(a);u<o.length;u++)i=o[u],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(d)},a=self["webpackChunkgusto_app"]=self["webpackChunkgusto_app"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(5330)}));a=s.O(a)})();
//# sourceMappingURL=app.f34367aa.js.map