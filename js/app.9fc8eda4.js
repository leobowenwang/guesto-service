(function(){"use strict";var e={8477:function(e,t,s){var a=s(9242),l=s(3396);function i(e,t){const s=(0,l.up)("router-link"),a=(0,l.up)("v-col"),i=(0,l.up)("v-row"),o=(0,l.up)("v-container"),r=(0,l.up)("v-app-bar"),n=(0,l.up)("router-view"),u=(0,l.up)("v-main"),c=(0,l.up)("v-app");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{app:"",color:"#2196F3",dark:""},{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{align:"center",justify:"space-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{to:"/login",class:"nav-link"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login")])),_:1}),(0,l.Wm)(s,{to:"/events",class:"nav-link"},{default:(0,l.w5)((()=>[(0,l.Uk)("Events")])),_:1}),(0,l.Wm)(s,{to:"/users",class:"nav-link"},{default:(0,l.w5)((()=>[(0,l.Uk)("Benutzer")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n)])),_:1})])),_:1})])),_:1})}var o=s(89);const r={},n=(0,o.Z)(r,[["render",i]]);var u=n,c=s(2483);const d=(0,l._)("h2",null,"Registrierung",-1);function m(e,t,s,i,o,r){const n=(0,l.up)("v-alert"),u=(0,l.up)("v-text-field"),c=(0,l.up)("v-select"),m=(0,l.up)("v-btn"),h=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.registrationSuccess?((0,l.wg)(),(0,l.j4)(n,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrierung erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.registrationFailed?((0,l.wg)(),(0,l.j4)(n,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrierung fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),(0,l._)("div",null,[d,(0,l.Wm)(h,{onSubmit:t[4]||(t[4]=(0,a.iM)((()=>{}),["prevent"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"text",id:"username",modelValue:o.formData.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.username=e),required:"",label:"Benutzername"},null,8,["modelValue"]),(0,l.Wm)(u,{type:"password",id:"password",modelValue:o.formData.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.password=e),required:"",label:"Passwort"},null,8,["modelValue"]),(0,l.Wm)(c,{modelValue:o.formData.role,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.role=e),label:"Rolle",items:o.roleOptions,"item-title":"label","item-value":"value"},null,8,["modelValue","items"]),(0,l.Wm)(m,{class:"text-none mb-4",color:"#48EDDD",size:"x-large",block:"",onClick:t[3]||(t[3]=e=>r.submitForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrieren")])),_:1})])),_:1})])],64)}const h="http://localhost:8080/user/register";var g={data(){return{formData:{username:"",password:"",role:"ADMIN"},roleOptions:[],registrationSuccess:!1,registrationFailed:!1}},methods:{async submitForm(){this.registrationSuccess=!1,this.registrationFailed=!1;try{const e=await this.$axios.post(h,this.formData);e&&(this.registrationSuccess=!0)}catch(e){this.registrationFailed=!0}}},created(){this.roleOptions=[{value:"ADMIN",label:"Admin"},{value:"STAFF",label:"Mitarbeiter"},{value:"CONTROLLER",label:"Kontrolleur"}]},name:"RegistrationForm"};const p=(0,o.Z)(g,[["render",m]]);var f=p,w=s(7139);const v=(0,l._)("h2",{class:"text-h2 mb-4"},"Login",-1);function k(e,t,s,a,i,o){const r=(0,l.up)("v-alert"),n=(0,l.up)("v-text-field"),u=(0,l.up)("v-btn"),c=(0,l.up)("v-form"),d=(0,l.up)("v-card"),m=(0,l.up)("v-col"),h=(0,l.up)("v-row"),g=(0,l.up)("v-container");return(0,l.wg)(),(0,l.j4)(g,{class:"fill-height"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{align:"center",justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{cols:"12",sm:"8",md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"elevation-12 pa-8"},{default:(0,l.w5)((()=>[i.loginSuccess?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success",icon:"mdi-check-circle-outline",class:"mb-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login erfolgreich!")])),_:1})):(0,l.kq)("",!0),i.loginFailed?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error",icon:"mdi-alert-circle-outline",class:"mb-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),v,(0,l.Wm)(c,{ref:"form"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{type:"text",id:"username",modelValue:i.formData.username,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formData.username=e),rules:[i.rules.required],label:"Benutzername"},null,8,["modelValue","rules"]),(0,l.Wm)(n,{type:"password",id:"password",modelValue:i.formData.password,"onUpdate:modelValue":t[1]||(t[1]=e=>i.formData.password=e),rules:[i.rules.required],label:"Passwort"},null,8,["modelValue","rules"]),(0,l.Wm)(u,{color:"#2196F3",dark:"",block:"",onClick:o.validateAndSubmitForm},{default:(0,l.w5)((()=>[(0,l.Uk)("Anmelden")])),_:1},8,["onClick"]),i.validationError?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"error",class:"mt-4"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,w.zw)(i.validationError),1)])),_:1})):(0,l.kq)("",!0)])),_:1},512)])),_:1})])),_:1})])),_:1})])),_:1})}s(560);var D=s(65);const y={namespaced:!0,state:{access_token:null!=localStorage.getItem("token")?localStorage.getItem("token"):null,loggedIn:!1},mutations:{setJWT(e,t){localStorage.setItem("token",t),e.access_token=t},logout(e){e.loggedIn=!1,localStorage.setItem("token",null)}}},b=(0,D.MT)({modules:{auth:y}});var _=b;const U="http://localhost:8080/user/login";var x={data(){return{formData:{username:"",password:""},loginSuccess:!1,loginFailed:!1,validationError:"",rules:{required:e=>!!e||"Dieses Feld ist erforderlich"}}},methods:{async validateAndSubmitForm(){this.loginSuccess=!1,this.loginFailed=!1,this.validationError="",this.$refs.form.validate()?this.submitForm():this.validationError="Bitte füllen Sie alle erforderlichen Felder aus."},async submitForm(){if(this.loginSuccess=!1,this.loginFailed=!1,this.validationError="",this.formData.username&&this.formData.password)try{const e=await this.$axios.post(U,this.formData);this.loginSuccess=!0,200===e.status&&(_.state.auth.loggedIn=!0,_.commit("auth/setJWT",e.data.token),setTimeout((()=>{this.$router.push("/events")}),1e3),console.log("Anmeldung erfolgreich:",e.data))}catch(e){this.loginFailed=!0,console.error("Fehler bei der Anmeldung:",e)}else this.validationError="Bitte füllen Sie alle erforderlichen Felder aus."}},created(){},name:"LoginForm"};const W=(0,o.Z)(x,[["render",k]]);var A=W;const V={key:0},S=(0,l._)("div",{style:{clear:"both"}},null,-1);function E(e,t,s,i,o,r){const n=(0,l.up)("v-alert"),u=(0,l.up)("v-icon"),c=(0,l.up)("v-data-table"),d=(0,l.up)("v-btn"),m=(0,l.up)("v-container"),h=(0,l.up)("v-text-field"),g=(0,l.up)("guest-view"),p=(0,l.up)("assign-view"),f=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.success&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.failed&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.deleteSuccess&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:2,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.deleteFailed&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:3,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.selectedEvent?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{items:o.events,headers:o.headers,"items-per-page":o.itemsPerPage,"server-items-length":o.totalEvents,"item-key":"eventName",loading:o.loading,"onUpdate:page":r.onPageChange},{item:(0,l.w5)((({item:e})=>[(0,l._)("tr",null,[(0,l._)("td",null,(0,w.zw)(e.eventName),1),(0,l._)("td",null,(0,w.zw)(e.eventTimeDisplay),1),(0,l._)("td",null,(0,w.zw)(e.location),1),(0,l._)("td",null,[(0,l.Wm)(u,{size:"small",class:"me-2",onClick:t=>r.editEvent(e),color:"#2196F3"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,l.Wm)(u,{size:"small",onClick:t=>r.deleteItem(e),color:"rgb(200, 35, 51)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-delete ")])),_:2},1032,["onClick"])])])])),_:1},8,["items","headers","items-per-page","server-items-length","loading","onUpdate:page"]),(0,l.Wm)(d,{class:"text-none mb-4 create-btn",color:"#2196F3",onClick:t[0]||(t[0]=e=>r.createEvent())},{default:(0,l.w5)((()=>[(0,l.Uk)("Erstellen")])),_:1})])),_:1})),o.selectedEvent?((0,l.wg)(),(0,l.j4)(m,{key:5},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{onSubmit:(0,a.iM)(r.submitForm,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"text",id:"eventName",modelValue:o.formData.eventName,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.eventName=e),required:"",label:"Event Name"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"datetime-local",id:"eventTime",modelValue:o.formData.eventTime,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.eventTime=e),required:"",label:"Event Zeit"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"number",id:"maxGuestList",modelValue:o.formData.maxGuestList,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.maxGuestList=e),required:"",label:"Max Anzahl Gäste"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"number",id:"price",modelValue:o.formData.price,"onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.price=e),required:"",label:"Preis"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"text",id:"location",modelValue:o.formData.location,"onUpdate:modelValue":t[5]||(t[5]=e=>o.formData.location=e),required:"",label:"Location"},null,8,["modelValue"]),o.formData.id?((0,l.wg)(),(0,l.iD)("div",V,[(0,l.Wm)(g,{eventId:o.formData.id},null,8,["eventId"]),(0,l.Wm)(p,{eventId:o.formData.id},null,8,["eventId"])])):(0,l.kq)("",!0),S,(0,l._)("div",null,[(0,l.Wm)(d,{type:"submit",class:"text-none mb-4 right-btn",color:"#28a745"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1}),(0,l.Wm)(d,{class:"text-none mb-4 left-btn",color:"#ffc107",onClick:t[6]||(t[6]=e=>r.cancelForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Abbrechen")])),_:1})])])),_:1},8,["onSubmit"])])),_:1})):(0,l.kq)("",!0)],64)}function q(){let e=_.state.auth.access_token;return e?{Authorization:"Bearer "+e}:{}}function F(e,t,s,i,o,r){const n=(0,l.up)("v-alert"),u=(0,l.up)("v-col"),c=(0,l.up)("v-row"),d=(0,l.up)("v-expansion-panel-title"),m=(0,l.up)("v-icon"),h=(0,l.up)("v-data-table"),g=(0,l.up)("v-btn"),p=(0,l.up)("v-card-title"),f=(0,l.up)("v-text-field"),v=(0,l.up)("v-form"),k=(0,l.up)("v-card-text"),D=(0,l.up)("v-card-actions"),y=(0,l.up)("v-card"),b=(0,l.up)("v-dialog"),_=(0,l.up)("v-container"),U=(0,l.up)("v-expansion-panel-text"),x=(0,l.up)("v-expansion-panel"),W=(0,l.up)("v-expansion-panels");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.success&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.failed&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.deleteSuccess&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:2,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.deleteFailed&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:3,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(W,{style:{"margin-bottom":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{cols:"4",class:"d-flex justify-start"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Gäste ")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{items:o.guests,headers:o.headers,"items-per-page":o.itemsPerPage,"server-items-length":o.totalGuests,"item-key":"firstName",loading:o.loading,"onUpdate:page":r.onPageChange},{item:(0,l.w5)((({item:e})=>[(0,l._)("tr",null,[(0,l._)("td",null,(0,w.zw)(e.firstName+" "+e.lastName),1),(0,l._)("td",null,(0,w.zw)(e.additionalGuests),1),(0,l._)("td",null,[e.remainingCheckIns>0?((0,l.wg)(),(0,l.j4)(m,{key:0,size:"small",class:"me-2",onClick:t=>r.checkInGuest(e),color:"green"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-checkbox-marked ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),0==e.remainingCheckIns?((0,l.wg)(),(0,l.j4)(m,{key:1,size:"small",class:"me-2",onClick:t=>r.checkOutGuest(e),color:"rgb(200, 35, 51)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-arrow-right-box ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,l.Uk)(" "+(0,w.zw)(e.remainingCheckIns),1)]),(0,l._)("td",null,(0,w.zw)(r.getCheckedInDisplayText(e.checkedIn)),1),(0,l._)("td",null,(0,w.zw)(r.geCustomPriceDisplayText(e.customPrice)),1),(0,l._)("td",null,(0,w.zw)(e.comment),1),(0,l._)("td",null,[(0,l.Wm)(m,{size:"small",class:"me-2",onClick:t=>r.editGuest(e),color:"rgb(72, 237, 221)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,l.Wm)(m,{size:"small",onClick:t=>r.deleteGuest(e),color:"rgb(200, 35, 51)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-delete ")])),_:2},1032,["onClick"])])])])),_:1},8,["items","headers","items-per-page","server-items-length","loading","onUpdate:page"]),(0,l.Wm)(g,{class:"text-none mb-4 right-btn",color:"#48EDDD",onClick:t[0]||(t[0]=e=>r.addGuest())},{default:(0,l.w5)((()=>[(0,l.Uk)("Gast hinzufügen")])),_:1}),(0,l.Wm)(b,{modelValue:o.guestDialogVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>o.guestDialogVisible=e),"max-width":"500"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,w.zw)(o.guestData.id?"Gast bearbeiten":"Gast hinzufügen"),1)])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{onSubmit:t[6]||(t[6]=(0,a.iM)((()=>{}),["prevent"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{type:"text",id:"firstName",modelValue:o.guestData.firstName,"onUpdate:modelValue":t[1]||(t[1]=e=>o.guestData.firstName=e),required:"",label:"Vorname"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"text",id:"lastName",modelValue:o.guestData.lastName,"onUpdate:modelValue":t[2]||(t[2]=e=>o.guestData.lastName=e),required:"",label:"Nachname"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"number",id:"additionalGuests",modelValue:o.guestData.additionalGuests,"onUpdate:modelValue":t[3]||(t[3]=e=>o.guestData.additionalGuests=e),required:"",label:"Anzahl Begleitung"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"text",id:"comment",modelValue:o.guestData.comment,"onUpdate:modelValue":t[4]||(t[4]=e=>o.guestData.comment=e),required:"",label:"Kommentar"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"number",id:"customPrice",modelValue:o.guestData.customPrice,"onUpdate:modelValue":t[5]||(t[5]=e=>o.guestData.customPrice=e),required:"",label:"Benutzerdefinierter Preis"},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"text-none mb-4",color:"#ffc107",onClick:t[7]||(t[7]=e=>r.closeDialog())},{default:(0,l.w5)((()=>[(0,l.Uk)("Abbrechen")])),_:1}),(0,l.Wm)(g,{type:"submit",class:"text-none mb-4",color:"#28a745",onClick:t[8]||(t[8]=e=>r.saveGuest())},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})],64)}const N="http://localhost:8080/event";var C={props:{eventId:{type:Number,required:!0}},data(){return{guests:[],headers:[{title:"Name",value:"firstNamelastName"},{title:"Anzahl Begleitung",value:"additionalGuests"},{title:"Übrige Check-ins",key:"remainingCheckIns"},{title:"Eingecheckt",key:"checkedIn"},{title:"B.def. Preis",key:"customPrice"},{title:"Kommentar",key:"comment"},{title:"Aktionen",key:"actions"}],itemsPerPage:5,totalGuests:0,loading:!1,success:!1,failed:!1,deleteSuccess:!1,deleteFailed:!1,showAlert:!1,guestDialogVisible:!1,guestData:{firstName:"",lastName:"",additionalGuests:0,comment:"",customPrice:0}}},name:"GuestView",components:{},methods:{fetchData(){this.loading=!0,this.$axios.get(N+"/"+this.eventId+"/guest",{params:{_page:this.$route.query.page||1,_limit:this.itemsPerPage},headers:q()}).then((e=>{this.guests=e.data,this.totalGuests=Number(e.headers["x-total-count"]),this.guests.actions="",this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},onPageChange(e){this.$router.push({query:{page:e}}),this.fetchData()},async deleteGuest(e){const t=window.confirm("Sind Sie sicher, dass Sie diesen Gast löschen möchten?");if(t){this.deleteSuccess=!1,this.deleteFailed=!1;try{console.log("Löschen "+e.id);let t=await this.$axios.delete(N+"/"+this.eventId+"/guest/"+e.id,{params:{},headers:q()});t&&(console.log("DELETED"),console.log(t),this.deleteSuccess=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(s){console.log("ERROR"),console.log(s),this.deleteFailed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},addGuest(){this.openDialog()},editGuest(e){this.guestDialogVisible=!0,this.guestData={...this.guests.find((t=>t.id===e.id))}},getCheckedInDisplayText(e){return!1===e?"Nein":"Ja"},geCustomPriceDisplayText(e){return e+"€"},openDialog(){this.guestDialogVisible=!0},closeDialog(){this.guestDialogVisible=!1,this.guestData={firstName:"",lastName:"",additionalGuests:0,comment:"",customPrice:0}},async saveGuest(){console.log(this.guestData),this.success=!1,this.failed=!1;try{let e;this.guestData.id?(console.log("UMÄNDERN"),e=await this.$axios.put(N+"/"+this.eventId+"/guest/"+this.guestData.id,this.guestData,{params:{},headers:q()})):(console.log("NEEEU"),e=await this.$axios.post(N+"/"+this.eventId+"/guest",this.guestData,{params:{},headers:q()})),e&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.closeDialog(),this.fetchData())}catch(e){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}},async checkOutGuest(e){const t=window.confirm("Sind Sie sicher, dass Sie diesen Gast auschecken möchten?");t&&await this.checkInGuest(e)},async checkInGuest(e){console.log(e);try{console.log("UMÄNDERN");let t=await this.$axios.put(N+"/"+this.eventId+"/check-in/"+e.id,{},{params:{},headers:q()});t&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(t){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},watch:{"$route.query.page"(){this.fetchData()}},created(){console.log(this.eventId),this.fetchData()}};const P=(0,o.Z)(C,[["render",F]]);var T=P;function I(e,t,s,a,i,o){const r=(0,l.up)("v-alert"),n=(0,l.up)("v-col"),u=(0,l.up)("v-row"),c=(0,l.up)("v-expansion-panel-title"),d=(0,l.up)("v-select"),m=(0,l.up)("v-btn"),h=(0,l.up)("v-container"),g=(0,l.up)("v-expansion-panel-text"),p=(0,l.up)("v-expansion-panel"),f=(0,l.up)("v-expansion-panels");return(0,l.wg)(),(0,l.iD)(l.HY,null,[i.success&&e.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),i.failed&&e.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(f,{style:{"margin-bottom":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{cols:"4",class:"d-flex justify-start"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Zugeordnete Benutzer ")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:i.assignedUsers,"onUpdate:modelValue":t[0]||(t[0]=e=>i.assignedUsers=e),items:i.allUsers,chips:"",label:"Benutzer",multiple:"","item-title":"username","item-value":"id"},null,8,["modelValue","items"]),(0,l._)("div",null,[(0,l.Wm)(m,{class:"text-none mb-4 right-btn",color:"#28a745",onClick:t[1]||(t[1]=e=>o.saveAssignedUsers())},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1})])])),_:1})])),_:1})])),_:1})])),_:1})],64)}const j="http://localhost:8080";var G={props:{eventId:{type:Number,required:!0}},data(){return{assignedUsers:[],allUsers:[],loading:!1,success:!1,failed:!1}},name:"AssignView",components:{},methods:{fetchData(){this.loading=!0,this.$axios.get(j+"/user/list",{params:{},headers:q()}).then((e=>{this.allUsers=e.data,this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},async saveAssignedUsers(){console.log(this.assignedUsers),this.success=!1,this.failed=!1;let e=!1;for(let s=0;s<this.assignedUsers.length;s++)if(this.assignedUsers[s]){this.data={userId:this.assignedUsers[s]};try{await this.$axios.post(j+"/event/"+this.eventId+"/assign",this.data,{params:{},headers:q()})}catch(t){console.log(t),e=this.assignedUsers[s]}}e?(console.log("errorCatchedForId "+e),this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)):(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3))}},watch:{"$route.query.page"(){this.fetchData()}},created(){console.log(this.eventId),this.fetchData()}};const z=(0,o.Z)(G,[["render",I]]);var $=z;const O="http://localhost:8080/event";var L={data(){return{events:[],headers:[{title:"Event Name",value:"eventName"},{title:"Event Time",value:"eventTime"},{title:"Location",value:"location"},{title:"Aktionen",key:"actions"}],itemsPerPage:5,totalEvents:0,loading:!1,selectedEvent:!1,formData:{eventName:"",eventTime:null,maxGuestList:0,price:0,location:""},success:!1,failed:!1,deleteSuccess:!1,deleteFailed:!1,showAlert:!1,guestDialogVisible:!1,guestData:{firstName:"",lastName:"",additionalGuests:0,comment:"",customPrice:0}}},name:"EventsPage",components:{AssignView:$,GuestView:T},methods:{fetchData(){this.loading=!0,this.$axios.get(O,{params:{_page:this.$route.query.page||1,_limit:this.itemsPerPage},headers:q()}).then((e=>{this.events=e.data,this.totalEvents=Number(e.headers["x-total-count"]),this.events.forEach((e=>{e.eventTimeDisplay=this.formatDate(e.eventTime);const t=new Date(e.eventTime),s=new Date(t.getTime()-6e4*t.getTimezoneOffset());e.eventTime=s.toISOString().slice(0,16)})),this.events.actions="",this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},formatDate(e){if(!e)return"";const t={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"};let s=new Date(e).toLocaleDateString("de-DE",t);return s=s.replace(/[,]/g," "),s},onPageChange(e){this.$router.push({query:{page:e}}),this.fetchData()},createEvent(){this.selectedEvent=!0},editEvent(e){this.selectedEvent=!0,this.formData={...this.events.find((t=>t.id===e.id))}},async deleteItem(e){const t=window.confirm("Sind Sie sicher, dass Sie dieses Event löschen möchten?");if(t){this.deleteSuccess=!1,this.deleteFailed=!1;try{console.log("Löschen "+e.id);let t=await this.$axios.delete(O+"/"+e.id,{params:{},headers:q()});t&&(this.deleteSuccess=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(s){this.deleteFailed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},cancelForm(){this.selectedEvent=!1,this.formData={eventName:"",eventTime:new Date,maxGuestList:0,price:0,location:""}},async submitForm(){this.success=!1,this.failed=!1;try{let e;this.formData.id?(console.log("UMÄNDERN"),e=await this.$axios.put(O+"/"+this.formData.id,this.formData,{params:{},headers:q()})):(console.log("NEEEU"),e=await this.$axios.post(O,this.formData,{params:{},headers:q()})),e&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.cancelForm(),this.fetchData())}catch(e){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},watch:{"$route.query.page"(){this.fetchData()}},created(){this.fetchData()}};const M=(0,o.Z)(L,[["render",E]]);var R=M;function B(e,t,s,i,o,r){const n=(0,l.up)("v-alert"),u=(0,l.up)("v-icon"),c=(0,l.up)("v-data-table"),d=(0,l.up)("v-btn"),m=(0,l.up)("v-container"),h=(0,l.up)("v-text-field"),g=(0,l.up)("v-select"),p=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.success&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.failed&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.deleteSuccess&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:2,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.deleteFailed&&o.showAlert?((0,l.wg)(),(0,l.j4)(n,{key:3,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.selectedUser?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{items:o.users,headers:o.headers,"items-per-page":o.itemsPerPage,"server-items-length":o.totalEvents,"item-key":"username",loading:o.loading,"onUpdate:page":r.onPageChange},{item:(0,l.w5)((({item:e})=>[(0,l._)("tr",null,[(0,l._)("td",null,(0,w.zw)(e.username),1),(0,l._)("td",null,(0,w.zw)(e.role),1),(0,l._)("td",null,[(0,l.Wm)(u,{size:"small",class:"me-2",onClick:t=>r.editUser(e),color:"#2196F3"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,l.Wm)(u,{size:"small",onClick:t=>r.deleteUser(e),color:"rgb(200, 35, 51)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-delete ")])),_:2},1032,["onClick"])])])])),_:1},8,["items","headers","items-per-page","server-items-length","loading","onUpdate:page"]),(0,l.Wm)(d,{class:"text-none mb-4 create-btn",color:"#2196F3",onClick:t[0]||(t[0]=e=>r.createUser())},{default:(0,l.w5)((()=>[(0,l.Uk)("Erstellen")])),_:1})])),_:1})),o.selectedUser?((0,l.wg)(),(0,l.j4)(m,{key:5},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{onSubmit:(0,a.iM)(r.submitForm,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"text",id:"username",modelValue:o.formData.username,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.username=e),required:"",label:"Benutzername"},null,8,["modelValue"]),o.formData.id?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(h,{key:0,type:"password",id:"password",modelValue:o.formData.password,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.password=e),required:"",label:"Passwort"},null,8,["modelValue"])),(0,l.Wm)(g,{modelValue:o.formData.role,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.role=e),label:"Rolle",items:o.roleOptions,"item-title":"label","item-value":"value"},null,8,["modelValue","items"]),(0,l._)("div",null,[(0,l.Wm)(d,{type:"submit",class:"text-none mb-4 right-btn",color:"#28a745"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1}),(0,l.Wm)(d,{class:"text-none mb-4 left-btn",color:"#ffc107",onClick:t[4]||(t[4]=e=>r.cancelForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Abbrechen")])),_:1})])])),_:1},8,["onSubmit"])])),_:1})):(0,l.kq)("",!0)],64)}const Z="http://localhost:8080/user";var H={data(){return{users:[],headers:[{title:"Benutzername",value:"username"},{title:"Rolle",value:"role"},{title:"Aktionen",key:"actions"}],itemsPerPage:5,totalEvents:0,loading:!1,selectedUser:!1,formData:{username:"",password:"",role:"ADMIN"},roleOptions:[],success:!1,failed:!1,deleteSuccess:!1,deleteFailed:!1,showAlert:!1}},name:"UserPage",components:{},methods:{fetchData(){this.loading=!0,this.$axios.get(Z+"/list",{params:{_page:this.$route.query.page||1,_limit:this.itemsPerPage},headers:q()}).then((e=>{this.users=e.data,this.totalEvents=Number(e.headers["x-total-count"]),this.users.actions="",this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},onPageChange(e){this.$router.push({query:{page:e}}),this.fetchData()},createUser(){this.selectedUser=!0,console.log(this.selectedUser)},editUser(e){this.selectedUser=!0,this.formData={...this.users.find((t=>t.id===e.id))}},async deleteUser(e){const t=window.confirm("Sind Sie sicher, dass Sie diesen User löschen möchten?");if(t){this.deleteSuccess=!1,this.deleteFailed=!1;try{console.log("Löschen "+e.id);let t=await this.$axios.delete(Z+"/"+e.id,{params:{},headers:q()});t&&(this.deleteSuccess=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(s){this.deleteFailed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},cancelForm(){this.selectedUser=!1,this.formData={username:"",password:"",role:"ADMIN"}},async submitForm(){console.log(this.formData),this.success=!1,this.failed=!1;try{let e;this.formData.id?(console.log("UMÄNDERN"),e=await this.$axios.put(Z+"/"+this.formData.id,this.formData,{params:{},headers:q()})):(console.log("NEEEU"),e=await this.$axios.post(Z+"/register",this.formData,{params:{},headers:q()})),e&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.cancelForm(),this.fetchData())}catch(e){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},watch:{"$route.query.page"(){this.fetchData()}},created(){this.roleOptions=[{value:"ADMIN",label:"Admin"},{value:"STAFF",label:"Mitarbeiter"},{value:"CONTROLLER",label:"Kontrolleur"}],this.fetchData()}};const Y=(0,o.Z)(H,[["render",B]]);var K=Y;const J=[{path:"/register",component:f},{path:"/login",component:A},{path:"/events",component:R},{path:"/users",component:K}],Q=(0,c.p7)({history:(0,c.r5)(),routes:J});var X=Q,ee=s(1076),te=(s(9773),s(8957)),se=s(4926),ae=s(8600),le=s(596),ie=s(3504);const oe=(0,te.Rd)({icons:{defaultSet:"mdi",aliases:ie.j,sets:{mdi:ie.t,fa:le.fa}},components:se,directives:ae}),re=(0,a.ri)(u);re.use(oe),re.use(X),re.use(_),re.config.globalProperties.$axios=ee.Z,re.mount("#app")}},t={};function s(a){var l=t[a];if(void 0!==l)return l.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,a,l,i){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],i=e[c][2];for(var r=!0,n=0;n<a.length;n++)(!1&i||o>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[n])}))?a.splice(n--,1):(r=!1,i<o&&(o=i));if(r){e.splice(c--,1);var u=l();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,l,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,i,o=a[0],r=a[1],n=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(l in r)s.o(r,l)&&(s.m[l]=r[l]);if(n)var c=n(s)}for(t&&t(a);u<o.length;u++)i=o[u],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},a=self["webpackChunkgusto_app"]=self["webpackChunkgusto_app"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(8477)}));a=s.O(a)})();
//# sourceMappingURL=app.9fc8eda4.js.map