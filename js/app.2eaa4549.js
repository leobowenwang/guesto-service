(function(){"use strict";var e={6458:function(e,t,a){var s=a(9242),l=a(3396);function i(e,t){const a=(0,l.up)("router-link"),s=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("nav",null,[(0,l.Wm)(a,{to:"/login"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login")])),_:1}),(0,l.Uk)(" | "),(0,l.Wm)(a,{to:"/events"},{default:(0,l.w5)((()=>[(0,l.Uk)("Events")])),_:1}),(0,l.Uk)(" | "),(0,l.Wm)(a,{to:"/users"},{default:(0,l.w5)((()=>[(0,l.Uk)("Benutzer")])),_:1})]),(0,l.Wm)(s)],64)}var o=a(89);const n={},r=(0,o.Z)(n,[["render",i]]);var u=r,d=a(2483);const c=(0,l._)("h2",null,"Registrierung",-1);function m(e,t,a,i,o,n){const r=(0,l.up)("v-alert"),u=(0,l.up)("v-text-field"),d=(0,l.up)("v-select"),m=(0,l.up)("v-btn"),h=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.registrationSuccess?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrierung erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.registrationFailed?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrierung fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),(0,l._)("div",null,[c,(0,l.Wm)(h,{onSubmit:t[4]||(t[4]=(0,s.iM)((()=>{}),["prevent"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"text",id:"username",modelValue:o.formData.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.username=e),required:"",label:"Benutzername"},null,8,["modelValue"]),(0,l.Wm)(u,{type:"password",id:"password",modelValue:o.formData.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.password=e),required:"",label:"Passwort"},null,8,["modelValue"]),(0,l.Wm)(d,{modelValue:o.formData.role,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.role=e),label:"Rolle",items:o.roleOptions,"item-title":"label","item-value":"value"},null,8,["modelValue","items"]),(0,l.Wm)(m,{class:"text-none mb-4",color:"#48EDDD",size:"x-large",block:"",onClick:t[3]||(t[3]=e=>n.submitForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrieren")])),_:1})])),_:1})])],64)}const h="http://localhost:8080/user/register";var g={data(){return{formData:{username:"",password:"",role:"ADMIN"},roleOptions:[],registrationSuccess:!1,registrationFailed:!1}},methods:{async submitForm(){this.registrationSuccess=!1,this.registrationFailed=!1;try{const e=await this.$axios.post(h,this.formData);e&&(this.registrationSuccess=!0)}catch(e){this.registrationFailed=!0}}},created(){this.roleOptions=[{value:"ADMIN",label:"Admin"},{value:"STAFF",label:"Mitarbeiter"},{value:"PROMOTER",label:"Promoter"}]},name:"RegistrationForm"};const p=(0,o.Z)(g,[["render",m]]);var f=p;const w=(0,l._)("h2",null,"Login",-1);function v(e,t,a,i,o,n){const r=(0,l.up)("v-alert"),u=(0,l.up)("v-text-field"),d=(0,l.up)("v-btn"),c=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.loginSuccess?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.loginFailed?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),(0,l._)("div",null,[w,(0,l.Wm)(c,{onSubmit:t[3]||(t[3]=(0,s.iM)((()=>{}),["prevent"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"text",id:"username",modelValue:o.formData.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.username=e),required:"",label:"Benutzername"},null,8,["modelValue"]),(0,l.Wm)(u,{type:"password",id:"password",modelValue:o.formData.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.password=e),required:"",label:"Passwort"},null,8,["modelValue"]),(0,l.Wm)(d,{class:"text-none mb-4",color:"#48EDDD",size:"x-large",block:"",onClick:t[2]||(t[2]=e=>n.submitForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Anmelden")])),_:1})])),_:1})])],64)}a(560);var k=a(65);const D={namespaced:!0,state:{access_token:null!=localStorage.getItem("token")?localStorage.getItem("token"):null,loggedIn:!1},mutations:{setJWT(e,t){localStorage.setItem("token",t),e.access_token=t},logout(e){e.loggedIn=!1,localStorage.setItem("token",null)}}},b=(0,k.MT)({modules:{auth:D}});var y=b;const _="http://localhost:8080/user/login";var U={data(){return{formData:{username:"",password:""},loginSuccess:!1,loginFailed:!1}},methods:{async submitForm(){this.loginSuccess=!1,this.loginFailed=!1;try{const e=await this.$axios.post(_,this.formData);this.loginSuccess=!0,200===e.status&&(y.state.auth.loggedIn=!0,y.commit("auth/setJWT",e.data.token),setTimeout((()=>{this.$router.push("/events")}),1e3),console.log("Anmeldung erfolgreich:",e.data))}catch(e){this.loginFailed=!0,console.error("Fehler bei der Anmeldung:",e)}}},created(){},name:"LoginForm"};const V=(0,o.Z)(U,[["render",v]]);var x=V,A=a(7139);const W={key:0},S=(0,l._)("div",{style:{clear:"both"}},null,-1);function E(e,t,a,i,o,n){const r=(0,l.up)("v-alert"),u=(0,l.up)("v-icon"),d=(0,l.up)("v-data-table"),c=(0,l.up)("v-btn"),m=(0,l.up)("v-container"),h=(0,l.up)("v-text-field"),g=(0,l.up)("guest-view"),p=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.success&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.failed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.deleteSuccess&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:2,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.deleteFailed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:3,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.selectedEvent?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{items:o.events,headers:o.headers,"items-per-page":o.itemsPerPage,"server-items-length":o.totalEvents,"item-key":"eventName",loading:o.loading,"onUpdate:page":n.onPageChange},{item:(0,l.w5)((({item:e})=>[(0,l._)("tr",null,[(0,l._)("td",null,(0,A.zw)(e.eventName),1),(0,l._)("td",null,(0,A.zw)(e.eventTimeDisplay),1),(0,l._)("td",null,(0,A.zw)(e.location),1),(0,l._)("td",null,[(0,l.Wm)(u,{size:"small",class:"me-2",onClick:t=>n.editEvent(e)},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,l.Wm)(u,{size:"small",onClick:t=>n.deleteItem(e)},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-delete ")])),_:2},1032,["onClick"])])])])),_:1},8,["items","headers","items-per-page","server-items-length","loading","onUpdate:page"]),(0,l.Wm)(c,{class:"text-none mb-4 create-btn",color:"#48EDDD",onClick:t[0]||(t[0]=e=>n.createEvent())},{default:(0,l.w5)((()=>[(0,l.Uk)("Erstellen")])),_:1})])),_:1})),o.selectedEvent?((0,l.wg)(),(0,l.j4)(m,{key:5},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{onSubmit:(0,s.iM)(n.submitForm,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"text",id:"eventName",modelValue:o.formData.eventName,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.eventName=e),required:"",label:"Event Name"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"datetime-local",id:"eventTime",modelValue:o.formData.eventTime,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.eventTime=e),required:"",label:"Event Zeit"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"number",id:"maxGuestList",modelValue:o.formData.maxGuestList,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.maxGuestList=e),required:"",label:"Max Anzahl Gäste"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"number",id:"price",modelValue:o.formData.price,"onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.price=e),required:"",label:"Preis"},null,8,["modelValue"]),(0,l.Wm)(h,{type:"text",id:"location",modelValue:o.formData.location,"onUpdate:modelValue":t[5]||(t[5]=e=>o.formData.location=e),required:"",label:"Location"},null,8,["modelValue"]),o.formData.id?((0,l.wg)(),(0,l.iD)("div",W,[(0,l.Wm)(g,{eventId:o.formData.id},null,8,["eventId"])])):(0,l.kq)("",!0),S,(0,l._)("div",null,[(0,l.Wm)(c,{type:"submit",class:"text-none mb-4 right-btn",color:"#28a745"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1}),(0,l.Wm)(c,{class:"text-none mb-4 left-btn",color:"#ffc107",onClick:t[6]||(t[6]=e=>n.cancelForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Abbrechen")])),_:1})])])),_:1},8,["onSubmit"])])),_:1})):(0,l.kq)("",!0)],64)}function q(){let e=y.state.auth.access_token;return e?{Authorization:"Bearer "+e}:{}}function N(e,t,a,i,o,n){const r=(0,l.up)("v-alert"),u=(0,l.up)("v-col"),d=(0,l.up)("v-row"),c=(0,l.up)("v-expansion-panel-title"),m=(0,l.up)("v-icon"),h=(0,l.up)("v-data-table"),g=(0,l.up)("v-btn"),p=(0,l.up)("v-card-title"),f=(0,l.up)("v-text-field"),w=(0,l.up)("v-form"),v=(0,l.up)("v-card-text"),k=(0,l.up)("v-card-actions"),D=(0,l.up)("v-card"),b=(0,l.up)("v-dialog"),y=(0,l.up)("v-container"),_=(0,l.up)("v-expansion-panel-text"),U=(0,l.up)("v-expansion-panel"),V=(0,l.up)("v-expansion-panels");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.success&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.failed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.deleteSuccess&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:2,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.deleteFailed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:3,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(V,{style:{"margin-bottom":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{cols:"4",class:"d-flex justify-start"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Gäste ")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{items:o.guests,headers:o.headers,"items-per-page":o.itemsPerPage,"server-items-length":o.totalGuests,"item-key":"firstName",loading:o.loading,"onUpdate:page":n.onPageChange},{item:(0,l.w5)((({item:e})=>[(0,l._)("tr",null,[(0,l._)("td",null,(0,A.zw)(e.firstName+" "+e.lastName),1),(0,l._)("td",null,(0,A.zw)(e.additionalGuests),1),(0,l._)("td",null,[e.remainingCheckIns>0?((0,l.wg)(),(0,l.j4)(m,{key:0,size:"small",class:"me-2",onClick:t=>n.checkInGuest(e),color:"green"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-checkbox-marked ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,l.Uk)(" "+(0,A.zw)(e.remainingCheckIns),1)]),(0,l._)("td",null,(0,A.zw)(e.checkedIn),1),(0,l._)("td",null,(0,A.zw)(e.customPrice),1),(0,l._)("td",null,(0,A.zw)(e.comment),1),(0,l._)("td",null,[(0,l.Wm)(m,{size:"small",class:"me-2",onClick:t=>n.editGuest(e),color:"rgb(72, 237, 221)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,l.Wm)(m,{size:"small",onClick:t=>n.deleteGuest(e),color:"rgb(200, 35, 51)"},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-delete ")])),_:2},1032,["onClick"])])])])),_:1},8,["items","headers","items-per-page","server-items-length","loading","onUpdate:page"]),(0,l.Wm)(g,{class:"text-none mb-4 right-btn",color:"#48EDDD",onClick:t[0]||(t[0]=e=>n.addGuest())},{default:(0,l.w5)((()=>[(0,l.Uk)("Gast hinzufügen")])),_:1}),(0,l.Wm)(b,{modelValue:o.guestDialogVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>o.guestDialogVisible=e),"max-width":"500"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,A.zw)(o.guestData.id?"Gast bearbeiten":"Gast hinzufügen"),1)])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{onSubmit:t[6]||(t[6]=(0,s.iM)((()=>{}),["prevent"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{type:"text",id:"firstName",modelValue:o.guestData.firstName,"onUpdate:modelValue":t[1]||(t[1]=e=>o.guestData.firstName=e),required:"",label:"Vorname"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"text",id:"lastName",modelValue:o.guestData.lastName,"onUpdate:modelValue":t[2]||(t[2]=e=>o.guestData.lastName=e),required:"",label:"Nachname"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"number",id:"additionalGuests",modelValue:o.guestData.additionalGuests,"onUpdate:modelValue":t[3]||(t[3]=e=>o.guestData.additionalGuests=e),required:"",label:"Anzahl Begleitung"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"text",id:"comment",modelValue:o.guestData.comment,"onUpdate:modelValue":t[4]||(t[4]=e=>o.guestData.comment=e),required:"",label:"Kommentar"},null,8,["modelValue"]),(0,l.Wm)(f,{type:"number",id:"customPrice",modelValue:o.guestData.customPrice,"onUpdate:modelValue":t[5]||(t[5]=e=>o.guestData.customPrice=e),required:"",label:"Benutzerdefinierter Preis"},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"text-none mb-4",color:"#ffc107",onClick:t[7]||(t[7]=e=>n.closeDialog())},{default:(0,l.w5)((()=>[(0,l.Uk)("Abbrechen")])),_:1}),(0,l.Wm)(g,{type:"submit",class:"text-none mb-4",color:"#28a745",onClick:t[8]||(t[8]=e=>n.saveGuest())},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})],64)}const P="http://localhost:8080/event";var F={props:{eventId:{type:Number,required:!0}},data(){return{guests:[],headers:[{title:"Name",value:"firstNamelastName"},{title:"Anzahl Begleitung",value:"additionalGuests"},{title:"Übrige Check-ins",key:"remainingCheckIns"},{title:"Eingecheckt",key:"checkedIn"},{title:"B.def. Preis",key:"customPrice"},{title:"Kommentar",key:"comment"},{title:"Aktionen",key:"actions"}],itemsPerPage:5,totalGuests:0,loading:!1,selectedGuest:!1,success:!1,failed:!1,deleteSuccess:!1,deleteFailed:!1,showAlert:!1,guestDialogVisible:!1,guestData:{firstName:"",lastName:"",additionalGuests:0,comment:"",customPrice:0}}},name:"GuestView",components:{},methods:{fetchData(){this.loading=!0,this.$axios.get(P+"/"+this.eventId+"/guest",{params:{_page:this.$route.query.page||1,_limit:this.itemsPerPage},headers:q()}).then((e=>{this.guests=e.data,this.totalGuests=Number(e.headers["x-total-count"]),this.guests.actions="",this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},onPageChange(e){this.$router.push({query:{page:e}}),this.fetchData()},async deleteGuest(e){const t=window.confirm("Sind Sie sicher, dass Sie diesen Gast löschen möchten?");if(t){this.deleteSuccess=!1,this.deleteFailed=!1;try{console.log("Löschen "+e.id);let t=await this.$axios.delete(P+"/"+this.eventId+"/guest/"+e.id,{params:{},headers:q()});t&&(console.log("DELETED"),console.log(t),this.deleteSuccess=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(a){console.log("ERROR"),console.log(a),this.deleteFailed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},addGuest(){this.openDialog()},editGuest(e){this.guestDialogVisible=!0,this.guestData={...this.guests.find((t=>t.id===e.id))}},openDialog(){this.guestDialogVisible=!0},closeDialog(){this.guestDialogVisible=!1,this.guestData={firstName:"",lastName:"",additionalGuests:0,comment:"",customPrice:0}},async saveGuest(){console.log(this.guestData),this.success=!1,this.failed=!1;try{let e;this.guestData.id?(console.log("UMÄNDERN"),e=await this.$axios.put(P+"/"+this.eventId+"/guest/"+this.guestData.id,this.guestData,{params:{},headers:q()})):(console.log("NEEEU"),e=await this.$axios.post(P+"/"+this.eventId+"/guest",this.guestData,{params:{},headers:q()})),e&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.closeDialog(),this.fetchData())}catch(e){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}},async checkInGuest(e){console.log(e);try{console.log("UMÄNDERN");let t=await this.$axios.put(P+"/"+this.eventId+"/check-in/"+e.id,{},{params:{},headers:q()});t&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(t){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},watch:{"$route.query.page"(){this.fetchData()}},created(){console.log(this.eventId),this.fetchData()}};const T=(0,o.Z)(F,[["render",N]]);var C=T;const G="http://localhost:8080/event";var z={data(){return{events:[],headers:[{title:"Event Name",value:"eventName"},{title:"Event Time",value:"eventTime"},{title:"Location",value:"location"},{title:"Aktionen",key:"actions"}],itemsPerPage:5,totalEvents:0,loading:!1,selectedEvent:!1,formData:{eventName:"",eventTime:null,maxGuestList:0,price:0,location:""},success:!1,failed:!1,deleteSuccess:!1,deleteFailed:!1,showAlert:!1,guestDialogVisible:!1,guestData:{firstName:"",lastName:"",additionalGuests:0,comment:"",customPrice:0}}},name:"EventsPage",components:{GuestView:C},methods:{fetchData(){this.loading=!0,this.$axios.get(G,{params:{_page:this.$route.query.page||1,_limit:this.itemsPerPage},headers:q()}).then((e=>{this.events=e.data,this.totalEvents=Number(e.headers["x-total-count"]),this.events.forEach((e=>{e.eventTimeDisplay=this.formatDate(e.eventTime);const t=new Date(e.eventTime),a=new Date(t.getTime()-6e4*t.getTimezoneOffset());e.eventTime=a.toISOString().slice(0,16)})),this.events.actions="",this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},formatDate(e){if(!e)return"";const t={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"};let a=new Date(e).toLocaleDateString("de-DE",t);return a=a.replace(/[,]/g," "),a},onPageChange(e){this.$router.push({query:{page:e}}),this.fetchData()},createEvent(){this.selectedEvent=!0},editEvent(e){this.selectedEvent=!0,this.formData={...this.events.find((t=>t.id===e.id))}},async deleteItem(e){const t=window.confirm("Sind Sie sicher, dass Sie dieses Event löschen möchten?");if(t){this.deleteSuccess=!1,this.deleteFailed=!1;try{console.log("Löschen "+e.id);let t=await this.$axios.delete(G+"/"+e.id,{params:{},headers:q()});t&&(this.deleteSuccess=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(a){this.deleteFailed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},cancelForm(){this.selectedEvent=!1,this.formData={eventName:"",eventTime:new Date,maxGuestList:0,price:0,location:""}},async submitForm(){this.success=!1,this.failed=!1;try{let e;this.formData.id?(console.log("UMÄNDERN"),e=await this.$axios.put(G+"/"+this.formData.id,this.formData,{params:{},headers:q()})):(console.log("NEEEU"),e=await this.$axios.post(G,this.formData,{params:{},headers:q()})),e&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.cancelForm(),this.fetchData())}catch(e){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},watch:{"$route.query.page"(){this.fetchData()}},created(){this.fetchData()}};const j=(0,o.Z)(z,[["render",E]]);var I=j;function O(e,t,a,i,o,n){const r=(0,l.up)("v-alert"),u=(0,l.up)("v-icon"),d=(0,l.up)("v-data-table"),c=(0,l.up)("v-btn"),m=(0,l.up)("v-container"),h=(0,l.up)("v-text-field"),g=(0,l.up)("v-select"),p=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o.success&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:0,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.failed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:1,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.deleteSuccess&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:2,type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen erfolgreich!")])),_:1})):(0,l.kq)("",!0),o.deleteFailed&&o.showAlert?((0,l.wg)(),(0,l.j4)(r,{key:3,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)("Löschen fehlgeschlagen!")])),_:1})):(0,l.kq)("",!0),o.selectedUser?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{items:o.users,headers:o.headers,"items-per-page":o.itemsPerPage,"server-items-length":o.totalEvents,"item-key":"username",loading:o.loading,"onUpdate:page":n.onPageChange},{item:(0,l.w5)((({item:e})=>[(0,l._)("tr",null,[(0,l._)("td",null,(0,A.zw)(e.username),1),(0,l._)("td",null,(0,A.zw)(e.role),1),(0,l._)("td",null,[(0,l.Wm)(u,{size:"small",class:"me-2",onClick:t=>n.editUser(e)},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,l.Wm)(u,{size:"small",onClick:t=>n.deleteUser(e)},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-delete ")])),_:2},1032,["onClick"])])])])),_:1},8,["items","headers","items-per-page","server-items-length","loading","onUpdate:page"]),(0,l.Wm)(c,{class:"text-none mb-4 create-btn",color:"#48EDDD",onClick:t[0]||(t[0]=e=>n.createUser())},{default:(0,l.w5)((()=>[(0,l.Uk)("Erstellen")])),_:1})])),_:1})),o.selectedUser?((0,l.wg)(),(0,l.j4)(m,{key:5},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{onSubmit:(0,s.iM)(n.submitForm,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"text",id:"username",modelValue:o.formData.username,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.username=e),required:"",label:"Benutzername"},null,8,["modelValue"]),o.formData.id?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(h,{key:0,type:"password",id:"password",modelValue:o.formData.password,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.password=e),required:"",label:"Passwort"},null,8,["modelValue"])),(0,l.Wm)(g,{modelValue:o.formData.role,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.role=e),label:"Rolle",items:o.roleOptions,"item-title":"label","item-value":"value"},null,8,["modelValue","items"]),(0,l._)("div",null,[(0,l.Wm)(c,{type:"submit",class:"text-none mb-4 right-btn",color:"#28a745"},{default:(0,l.w5)((()=>[(0,l.Uk)("Speichern")])),_:1}),(0,l.Wm)(c,{class:"text-none mb-4 left-btn",color:"#ffc107",onClick:t[4]||(t[4]=e=>n.cancelForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("Abbrechen")])),_:1})])])),_:1},8,["onSubmit"])])),_:1})):(0,l.kq)("",!0)],64)}const $="http://localhost:8080/user";var L={data(){return{users:[],headers:[{title:"Benutzername",value:"username"},{title:"Rolle",value:"role"},{title:"Aktionen",key:"actions"}],itemsPerPage:5,totalEvents:0,loading:!1,selectedUser:!1,formData:{username:"",password:"",role:"ADMIN"},roleOptions:[],success:!1,failed:!1,deleteSuccess:!1,deleteFailed:!1,showAlert:!1}},name:"UserPage",components:{},methods:{fetchData(){this.loading=!0,this.$axios.get($+"/list",{params:{_page:this.$route.query.page||1,_limit:this.itemsPerPage},headers:q()}).then((e=>{this.users=e.data,this.totalEvents=Number(e.headers["x-total-count"]),this.users.actions="",this.loading=!1})).catch((e=>{console.error("Error fetching data:",e),this.loading=!1}))},onPageChange(e){this.$router.push({query:{page:e}}),this.fetchData()},createUser(){this.selectedUser=!0,console.log(this.selectedUser)},editUser(e){this.selectedUser=!0,this.formData={...this.users.find((t=>t.id===e.id))}},async deleteUser(e){const t=window.confirm("Sind Sie sicher, dass Sie diesen User löschen möchten?");if(t){this.deleteSuccess=!1,this.deleteFailed=!1;try{console.log("Löschen "+e.id);let t=await this.$axios.delete($+"/"+e.id,{params:{},headers:q()});t&&(this.deleteSuccess=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.fetchData())}catch(a){this.deleteFailed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},cancelForm(){this.selectedUser=!1,this.formData={username:"",password:"",role:"ADMIN"}},async submitForm(){console.log(this.formData),this.success=!1,this.failed=!1;try{let e;this.formData.id?(console.log("UMÄNDERN"),e=await this.$axios.put($+"/"+this.formData.id,this.formData,{params:{},headers:q()})):(console.log("NEEEU"),e=await this.$axios.post($+"/register",this.formData,{params:{},headers:q()})),e&&(this.success=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3),this.cancelForm(),this.fetchData())}catch(e){this.failed=!0,this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),2e3)}}},watch:{"$route.query.page"(){this.fetchData()}},created(){this.roleOptions=[{value:"ADMIN",label:"Admin"},{value:"STAFF",label:"Mitarbeiter"},{value:"PROMOTER",label:"Promoter"}],this.fetchData()}};const M=(0,o.Z)(L,[["render",O]]);var R=M;const B=[{path:"/register",component:f},{path:"/login",component:x},{path:"/events",component:I},{path:"/users",component:R}],Z=(0,d.p7)({history:(0,d.r5)(),routes:B});var H=Z,Y=a(1076),J=(a(9773),a(8957)),K=a(4926),Q=a(8600),X=a(596),ee=a(3504);const te=(0,J.Rd)({icons:{defaultSet:"mdi",aliases:ee.j,sets:{mdi:ee.t,fa:X.fa}},components:K,directives:Q}),ae=(0,s.ri)(u);ae.use(te),ae.use(H),ae.use(y),ae.config.globalProperties.$axios=Y.Z,ae.mount("#app")}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,l,i){if(!s){var o=1/0;for(d=0;d<e.length;d++){s=e[d][0],l=e[d][1],i=e[d][2];for(var n=!0,r=0;r<s.length;r++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[r])}))?s.splice(r--,1):(n=!1,i<o&&(o=i));if(n){e.splice(d--,1);var u=l();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,l,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,i,o=s[0],n=s[1],r=s[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(l in n)a.o(n,l)&&(a.m[l]=n[l]);if(r)var d=r(a)}for(t&&t(s);u<o.length;u++)i=o[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkgusto_app"]=self["webpackChunkgusto_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(6458)}));s=a.O(s)})();
//# sourceMappingURL=app.2eaa4549.js.map